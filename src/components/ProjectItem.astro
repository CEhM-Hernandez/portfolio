---
// ------------------- components ------------------- //
import { Image } from 'astro:assets'
import GitHubIcon from '@icons/GitHubIcon.astro'
import LinkIcon from '@icons/LinkIcon.astro'

// ------------------- types ------------------- //
import type { Tags } from '@/types/types'

interface Props {
  title: string
  description: string
  thumbnailUrl: string
  demoUrl: string
  codeUrl?: string
  tags: Tags[]
}

const { title, description, thumbnailUrl, demoUrl, codeUrl, tags } = Astro.props

// ------------------- utils ---------------- //

/**
 * Converts a project title into a URL-friendly slug.
 * @param title - The project title to convert into a slug.
 * @returns A URL-friendly slug derived from the project title.
 */
function titleToSlug(title: string): string {
  return title.toLowerCase().replace(/\s/g, '-')
}
---

<li>
  <article
    class="bg-secondary/50 backdrop-blur-sm border border-main/10 hover:border-accent/30 rounded-xl p-4 sm:p-6 transition-all duration-300 hover:shadow-lg hover:shadow-accent/10 group"
  >
    <div class="flex flex-col lg:flex-row gap-6">
      <div
        class="w-full lg:w-80 xl:w-96 rounded-xl overflow-hidden bg-main/5 flex justify-center items-center"
      >
        <Image
          transition:name={`project-${titleToSlug(title)}`}
          src={thumbnailUrl}
          alt={`Miniatura de la aplicación ${title} hecha con una captura de pantalla de la misma.`}
          class="w-full aspect-[3/4] object-cover object-center hover:scale-105 transition-transform duration-500 group-hover:scale-102"
          width={400}
          height={300}
        />
      </div>

      <div class="flex flex-col justify-between gap-6 flex-1">
        <div class="flex flex-col gap-4">
          <h3
            class="text-xl sm:text-2xl font-bold text-accent text-balance group-hover:text-accent/90 transition-colors duration-300"
          >
            {title}
          </h3>
          <p
            class="text-main/80 text-pretty leading-relaxed group-hover:text-main transition-colors duration-300"
          >
            {description}
          </p>
        </div>

        <div class="flex flex-wrap gap-2">
          {
            tags.map((tag) => (
              <span
                class={`inline-flex items-center gap-1.5 px-3 py-1.5 rounded-full text-xs font-medium transition-all duration-300 border ${tag.class} hover:scale-105`}
              >
                {tag.icon && <tag.icon class="w-4 h-4" />}
                {tag.name}
              </span>
            ))
          }
        </div>

        <div class="flex flex-wrap gap-3">
          <a
            href={demoUrl}
            rel="noopener"
            target="_blank"
            class="inline-flex items-center gap-2 px-4 py-2.5 text-sm font-medium text-main hover:text-accent bg-secondary/90 hover:bg-secondary border border-main/20 hover:border-accent rounded-lg transition-all duration-300 hover:scale-105 hover:shadow-md group/demo"
          >
            <LinkIcon
              class="w-4 h-4 group-hover/demo:translate-x-0.5 transition-transform duration-300"
            />
            Ver Demo
          </a>
          {
            codeUrl && (
              <a
                href={codeUrl}
                rel="noopener"
                target="_blank"
                class="inline-flex items-center gap-2 px-4 py-2.5 text-sm font-medium text-main hover:text-accent bg-secondary/90 hover:bg-secondary border border-main/20 hover:border-accent rounded-lg transition-all duration-300 hover:scale-105 hover:shadow-md group/code"
              >
                <GitHubIcon class="w-4 h-4 group-hover/code:rotate-12 transition-transform duration-300" />
                Ver Código
              </a>
            )
          }
        </div>
      </div>
    </div>
  </article>
</li>
